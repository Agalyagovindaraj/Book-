{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>My Love Letter üíå</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400&display=swap');
        
        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(145deg, #2b1b2e 0%, #4a2c3d 50%, #6d3b47 100%);
            font-family: 'Playfair Display', serif;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Animated rose petals */
        .petal {
            position: absolute;
            background: #ff9a9e;
            width: 20px;
            height: 20px;
            border-radius: 150% 0 150% 0;
            transform: rotate(-45deg);
            opacity: 0.6;
            animation: petalFall 8s linear infinite;
            pointer-events: none;
            z-index: 1;
        }
        
        @keyframes petalFall {
            0% {
                transform: translateY(-10vh) rotate(-45deg) scale(1);
                opacity: 0.6;
            }
            100% {
                transform: translateY(110vh) rotate(45deg) scale(0.8);
                opacity: 0;
            }
        }
        
        /* Floating hearts background */
        .floating-heart {
            position: absolute;
            font-size: 24px;
            color: rgba(255, 105, 180, 0.3);
            animation: floatHeart 12s linear infinite;
            pointer-events: none;
            z-index: 1;
        }
        
        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 0.5;
            }
            80% {
                opacity: 0.5;
            }
            100% {
                transform: translateY(-20vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Glowing orbs */
        .orb {
            position: absolute;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #c06bff);
            border-radius: 50%;
            filter: blur(50px);
            opacity: 0.2;
            animation: orbPulse 8s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes orbPulse {
            0%, 100% { transform: scale(1); opacity: 0.2; }
            50% { transform: scale(1.2); opacity: 0.3; }
        }
        
        /* Main letter container - Vintage envelope style */
        .letter {
            background: rgba(253, 246, 242, 0.95);
            backdrop-filter: blur(5px);
            padding: 60px 50px;
            border-radius: 20px 50px 20px 50px;
            width: 550px;
            box-shadow: 
                0 30px 60px rgba(0,0,0,0.4),
                0 0 0 2px #fbe9e7 inset,
                0 0 0 5px #d4a5a5,
                0 0 0 8px #f8bbd0;
            text-align: left;
            position: relative;
            z-index: 10;
            transform: rotate(0.5deg);
            transition: all 0.5s ease;
            animation: letterAppear 1.2s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.8);
        }
        
        .letter:hover {
            transform: rotate(0deg) scale(1.01);
            box-shadow: 
                0 40px 80px rgba(0,0,0,0.5),
                0 0 0 2px #fbe9e7 inset,
                0 0 0 5px #e91e63,
                0 0 0 8px #ffd1dc;
        }
        
        @keyframes letterAppear {
            from {
                opacity: 0;
                transform: translateY(50px) rotate(2deg) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) rotate(0.5deg) scale(1);
            }
        }
        
        /* Wax seal */
        .wax-seal {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #b22222, #8b0000);
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: #ffd700;
            border: 2px solid #ffd700;
            animation: sealGlow 2s ease-in-out infinite;
            z-index: 20;
        }
        
        .wax-seal::before {
            content: '‚ù§Ô∏è';
            position: absolute;
            font-size: 30px;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3));
        }
        
        @keyframes sealGlow {
            0%, 100% { box-shadow: 0 5px 15px rgba(139, 0, 0, 0.5); }
            50% { box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5); }
        }
        
        /* Decorative corners */
        .corner {
            position: absolute;
            font-size: 30px;
            opacity: 0.3;
            animation: cornerSpin 10s linear infinite;
        }
        
        .corner-tl {
            top: 10px;
            left: 10px;
            animation: cornerSpin 8s linear infinite;
        }
        
        .corner-tr {
            top: 10px;
            right: 10px;
            animation: cornerSpin 8s linear infinite reverse;
        }
        
        .corner-bl {
            bottom: 10px;
            left: 10px;
            animation: cornerSpin 8s linear infinite reverse;
        }
        
        .corner-br {
            bottom: 10px;
            right: 10px;
            animation: cornerSpin 8s linear infinite;
        }
        
        @keyframes cornerSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Romantic ribbon */
        .ribbon {
            position: absolute;
            top: 30px;
            right: -15px;
            width: 80px;
            height: 30px;
            background: linear-gradient(145deg, #e91e63, #c2185b);
            transform: rotate(45deg);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
            z-index: 15;
            animation: ribbonWave 3s ease-in-out infinite;
        }
        
        .ribbon::before, .ribbon::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
        }
        
        .ribbon::before {
            left: -15px;
            border-width: 15px 15px 15px 0;
            border-color: transparent #c2185b transparent transparent;
        }
        
        .ribbon::after {
            right: -15px;
            border-width: 15px 0 15px 15px;
            border-color: transparent transparent transparent #c2185b;
        }
        
        @keyframes ribbonWave {
            0%, 100% { transform: rotate(45deg) scale(1); }
            50% { transform: rotate(50deg) scale(1.1); }
        }
        
        /* Header styling */
        h1 {
            text-align: center;
            color: #c2185b;
            font-size: 38px;
            font-family: 'Great Vibes', cursive;
            margin-bottom: 30px;
            text-shadow: 
                2px 2px 0 rgba(194, 24, 91, 0.2),
                4px 4px 0 rgba(255, 215, 0, 0.1);
            position: relative;
            letter-spacing: 2px;
        }
        
        h1::before {
            content: 'üíå';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 35px;
            animation: slideLetter 3s ease-in-out infinite;
        }
        
        h1::after {
            content: 'üíå';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 35px;
            animation: slideLetter 3s ease-in-out infinite reverse;
        }
        
        @keyframes slideLetter {
            0%, 100% { transform: translateY(-50%) translateX(0); }
            50% { transform: translateY(-50%) translateX(10px); }
        }
        
        /* Paragraph styling - Love letter text */
        p {
            font-size: 18px;
            color: #2c1e1e;
            line-height: 1.9;
            margin: 25px 0;
            font-family: 'Playfair Display', serif;
            text-align: justify;
            padding: 0 15px;
            position: relative;
            z-index: 5;
        }
        
        p::first-letter {
            font-size: 48px;
            font-family: 'Great Vibes', cursive;
            color: #c2185b;
            float: left;
            line-height: 40px;
            margin-right: 8px;
            text-shadow: 2px 2px 4px rgba(194, 24, 91, 0.2);
        }
        
        /* Highlighted text */
        .highlight {
            background: linear-gradient(120deg, #ffe6f0 0%, #ffe6f0 40%, #ffd9e8 60%, #ffe6f0 80%);
            padding: 2px 8px;
            border-radius: 20px;
            font-weight: bold;
            color: #c2185b;
            display: inline-block;
            animation: highlightPulse 2s ease-in-out infinite;
        }
        
        @keyframes highlightPulse {
            0%, 100% { background: linear-gradient(120deg, #ffe6f0 0%, #ffd9e8 100%); }
            50% { background: linear-gradient(120deg, #ffd9e8 0%, #ffe6f0 100%); }
        }
        
        /* Signature area */
        .signature {
            margin-top: 45px;
            text-align: right;
            font-family: 'Great Vibes', cursive;
            font-size: 28px;
            color: #c2185b;
            border-top: 2px dashed #e91e63;
            padding-top: 25px;
            position: relative;
        }
        
        .signature::before {
            content: '‚ù§Ô∏è';
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 25px;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.3); }
        }
        
        .signature span {
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            color: #777;
            display: block;
            margin-top: 8px;
            letter-spacing: 1px;
        }
        
        /* Decorative divider */
        .divider {
            text-align: center;
            margin: 20px 0;
            font-size: 20px;
            color: #e91e63;
            position: relative;
        }
        
        .divider span {
            background: #fffafc;
            padding: 0 20px;
            position: relative;
            z-index: 2;
        }
        
        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, #e91e63, transparent);
            z-index: 1;
        }
        
        /* Small decorative elements */
        .rose {
            position: absolute;
            font-size: 20px;
            opacity: 0.4;
            animation: roseBloom 4s ease-in-out infinite;
        }
        
        @keyframes roseBloom {
            0%, 100% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.2); opacity: 0.6; }
        }
        
        .rose-1 {
            bottom: 20px;
            left: 20px;
        }
        
        .rose-2 {
            top: 20px;
            right: 20px;
        }
        
        /* Music note animation */
        .music-note {
            position: absolute;
            font-size: 20px;
            color: #e91e63;
            animation: musicFloat 3s ease-out infinite;
            pointer-events: none;
            z-index: 15;
        }
        
        @keyframes musicFloat {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(20deg);
                opacity: 0;
            }
        }
        
        /* Responsive design */
        @media (max-width: 650px) {
            .letter {
                width: 380px;
                padding: 50px 30px;
            }
            
            h1 {
                font-size: 32px;
            }
            
            h1::before, h1::after {
                font-size: 25px;
            }
            
            p {
                font-size: 16px;
                line-height: 1.7;
            }
            
            .signature {
                font-size: 24px;
            }
            
            .ribbon {
                width: 60px;
                height: 25px;
                font-size: 12px;
                right: -10px;
            }
        }
        
        @media (max-width: 480px) {
            .letter {
                width: 300px;
                padding: 40px 20px;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .wax-seal {
                width: 50px;
                height: 50px;
                font-size: 25px;
            }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: #ffe6f0;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #e91e63, #c2185b);
            border-radius: 6px;
            border: 3px solid #ffe6f0;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #c2185b, #e91e63);
        }
        
        /* Selection styling */
        ::selection {
            background: #e91e63;
            color: white;
        }
        
        /* Audio player hidden */
        audio {
            display: none;
        }
        
        /* Loading hearts animation */
        .loading-heart {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 30px;
            animation: spin 2s linear infinite;
            z-index: 100;
        }
    </style>
</head>

<body>
    <!-- Background petals -->
    <div id="petals"></div>
    
    <!-- Floating hearts -->
    <div id="hearts"></div>
    
    <!-- Glowing orbs -->
    <div class="orb" style="width: 300px; height: 300px; top: 10%; left: 5%;"></div>
    <div class="orb" style="width: 400px; height: 400px; bottom: 10%; right: 5%; background: radial-gradient(circle at 30% 30%, #c06bff, #6b8cff);"></div>
    
    <!-- Corner decorations -->
    <div class="corner corner-tl">üåπ</div>
    <div class="corner corner-tr">üå∑</div>
    <div class="corner corner-bl">üå∫</div>
    <div class="corner corner-br">üå∏</div>
    
    <!-- Small roses -->
    <div class="rose rose-1">üåπ</div>
    <div class="rose rose-2">üåπ</div>

    <!-- üéµ LOVE SONG -->
    <audio id="loveSong" loop>
        <source src="{% static 'music/Eppadi Vandhaayo-2-Downringtone.com.mp3' %}" type="audio/mp3">
    </audio>

    <div class="letter">
        <!-- Wax seal -->
        <div class="wax-seal"></div>
        
        <!-- Romantic ribbon -->
        <div class="ribbon">LOVE</div>
        
        <h1>My Forever Person üíç</h1>

        <div class="divider">
            <span>üíï ‚úø üíï</span>
        </div>

        <p>
            Hey my love üíï,<br><br>
            This little surprise is just a small way of telling you something very big... 
            <span class="highlight">you are one of the most beautiful things</span> that ever happened to my life. 
            From the moment you walked into my world, everything slowly started feeling right. 
            Your voice calms me, your smile comforts me, and your presence feels like <span class="highlight">home</span>.
            <br><br>
            With you, even ordinary days feel special. I don't need perfect moments or expensive gifts ‚Äî 
            all I need is <span class="highlight">YOU</span>, your hand in mine, every future dream of mine has us in it, 
            and our hearts choosing each other every day.
            <br><br>
            So today, with a heart full of love and a shy smile on my face... no matter where life takes us, 
            I promise to love you a little more each day than the day before. 
            I want to ask you something special...
            <br><br>
            <span style="display: block; text-align: center; font-size: 24px; font-family: 'Great Vibes', cursive; color: #c2185b; margin: 20px 0;">
                WILL YOU MARRY ME? üíç
            </span>
        </p>

        <div class="divider">
            <span>üíñ ‚úß üíñ</span>
        </div>

        <div class="signature">
            Forever yours,<br>
            Cutie..EZHIL ‚ù§Ô∏è
            <span>Your love, your partner, your forever üíï</span>
        </div>
    </div>

    <script>
        const song = document.getElementById("loveSong");
        
        // Create rose petals
        function createPetals() {
            const petalCount = 30;
            const colors = ['#ff9a9e', '#fad0c4', '#ffb6c1', '#ffc0cb', '#ffe4e1'];
            
            for (let i = 0; i < petalCount; i++) {
                setTimeout(() => {
                    const petal = document.createElement('div');
                    petal.className = 'petal';
                    petal.style.left = Math.random() * 100 + '%';
                    petal.style.animationDuration = (Math.random() * 4 + 4) + 's';
                    petal.style.animationDelay = Math.random() * 5 + 's';
                    petal.style.background = colors[Math.floor(Math.random() * colors.length)];
                    petal.style.width = (Math.random() * 15 + 10) + 'px';
                    petal.style.height = petal.style.width;
                    document.body.appendChild(petal);
                }, i * 100);
            }
        }
        
        // Create floating hearts
        function createFloatingHearts() {
            const heartCount = 40;
            const hearts = ['üíñ', 'üíï', 'üíò', 'üíó', 'üíì', 'üíû', 'üíù', '‚ù§Ô∏è'];
            
            for (let i = 0; i < heartCount; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                    heart.style.animationDuration = (Math.random() * 8 + 6) + 's';
                    heart.style.animationDelay = Math.random() * 5 + 's';
                    document.body.appendChild(heart);
                }, i * 150);
            }
        }
        
        // Create music notes on play
        function createMusicNotes() {
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const note = document.createElement('div');
                    note.className = 'music-note';
                    note.innerHTML = ['‚ô™', '‚ô´', '‚ô©', '‚ô¨'][Math.floor(Math.random() * 4)];
                    note.style.left = Math.random() * 100 + '%';
                    note.style.bottom = '20px';
                    note.style.fontSize = (Math.random() * 20 + 20) + 'px';
                    note.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(note);
                    setTimeout(() => note.remove(), 3000);
                }, i * 300);
            }
        }
        
        // Initialize background
        createPetals();
        createFloatingHearts();
        
        // Try autoplay on load with user interaction fallback
        window.addEventListener("load", () => {
            song.play().catch(() => {
                console.log("Autoplay blocked ‚Äî waiting for user interaction");
                // Create a subtle indicator
                const indicator = document.createElement('div');
                indicator.style.position = 'fixed';
                indicator.style.bottom = '20px';
                indicator.style.left = '20px';
                indicator.style.background = 'rgba(255,255,255,0.9)';
                indicator.style.padding = '10px 20px';
                indicator.style.borderRadius = '50px';
                indicator.style.boxShadow = '0 5px 15px rgba(0,0,0,0.2)';
                indicator.style.zIndex = '100';
                indicator.style.fontSize = '14px';
                indicator.style.color = '#e91e63';
                indicator.innerHTML = 'üíï Click anywhere for music üíï';
                document.body.appendChild(indicator);
                
                setTimeout(() => {
                    indicator.style.opacity = '0';
                    setTimeout(() => indicator.remove(), 1000);
                }, 5000);
            });

            // Stop after 10 seconds
            setTimeout(() => {
                song.pause();
                song.currentTime = 0;
            }, 10000);
        });

        // Fallback: play on first click anywhere with animation
        document.body.addEventListener("click", () => {
            song.play().then(() => {
                createMusicNotes();
            }).catch(() => {});
            
            // Add heart explosion on click
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.innerHTML = 'üíñ';
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.fontSize = '30px';
                    heart.style.animationDuration = '2s';
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 2000);
                }, i * 50);
            }
        }, { once: true });
        
        // Add hover effect on letter
        document.querySelector('.letter').addEventListener('mouseenter', () => {
            const seal = document.querySelector('.wax-seal');
            seal.style.transform = 'translateX(-50%) scale(1.1)';
        });
        
        document.querySelector('.letter').addEventListener('mouseleave', () => {
            const seal = document.querySelector('.wax-seal');
            seal.style.transform = 'translateX(-50%) scale(1)';
        });
        
        // Add romantic typing effect to proposal line (optional)
        setTimeout(() => {
            const proposalLine = document.querySelector('span[style*="text-align: center"]');
            if (proposalLine) {
                proposalLine.style.animation = 'highlightPulse 2s ease-in-out infinite';
            }
        }, 500);
    </script>
</body>
</html>